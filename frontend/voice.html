<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Agent - Agent Twin</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/voice.css">
</head>
<body class="voice-page">
    <!-- Top Bar -->
    <header class="voice-header">
        <div class="header-left">
            <a href="/" class="logo-link">
                <div class="logo-container">
                    <img src="/static/images/logo.jpg" alt="Agent Twin Logo" class="logo-img">
                    <h1 class="logo-text">Agent Twin</h1>
                </div>
            </a>
        </div>
        <div class="header-center">
            <span id="welcomeMessage" class="welcome-message">Voice Agent</span>
        </div>
        <div class="header-right">
            <a href="/" class="nav-btn" title="Chat">
                <span class="nav-icon">ðŸ’¬</span>
                <span class="nav-label">Chat</span>
            </a>
            <a href="/timeline/" class="nav-btn" title="Memory Timeline">
                <span class="nav-icon">ðŸ§ </span>
                <span class="nav-label">Memory</span>
            </a>
            <button class="nav-btn logout-btn" id="logoutBtn" title="Logout">
                <span class="nav-icon">ðŸšª</span>
                <span class="nav-label">Logout</span>
            </button>
        </div>
    </header>

    <div class="voice-container">
        <!-- Voice Setup Section (shown if no voice clone) -->
        <div id="voiceSetup" class="voice-setup-section" style="display: flex;">
            <div class="setup-card">
                <h2>ðŸŽ¤ Set Up Your Voice</h2>
                <p>Record yourself reading the text below. Speak clearly and naturally for at least 30 seconds to create your voice clone.</p>
                
                <!-- Text to Read -->
                <div class="text-to-read">
                    <h3>Please read this text:</h3>
                    <div class="reading-text" id="readingText">
                        <p>Hello, this is my voice sample for Agent Twin. I'm recording this to create a voice clone that will sound like me. I want the AI to respond in my own voice, using everything it knows about my experiences, my background, and my writing style. This will make our conversations feel more personal and authentic. I'm speaking clearly and at a natural pace so that the voice cloning technology can capture the unique characteristics of my voice.</p>
                        <p>I'm excited to have conversations with an AI that not only understands me but also sounds like me. This will create a truly personalized experience where I can ask questions about my work, my projects, and my achievements, and get responses that feel like they're coming from someone who really knows me.</p>
                    </div>
                </div>
                
                <!-- Recording Interface -->
                <div class="recording-interface">
                    <div class="recording-status" id="recordingStatus">
                        <span class="status-dot" id="statusDot"></span>
                        <span id="recordingStatusText">Ready to record</span>
                    </div>
                    
                    <button class="record-btn-large" id="recordBtn">
                        <div class="mic-icon-large">ðŸŽ¤</div>
                        <span class="btn-label">Hold to Record</span>
                    </button>
                    
                    <div class="recording-timer" id="recordingTimer" style="display: none;">
                        <span id="timerText">00:00</span>
                        <p class="timer-hint">Keep recording until you finish reading the text</p>
                    </div>
                    
                    <div id="recordingResult" class="recording-result" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Voice Conversation Section (Voice-Only Interface) -->
        <div id="voiceConversation" class="voice-conversation-section" style="display: none;">
            <!-- Waveform Visualization -->
            <div class="waveform-container" id="waveformContainer">
                <div class="waveform" id="waveform">
                    <div class="wave-bar" style="--delay: 0s"></div>
                    <div class="wave-bar" style="--delay: 0.1s"></div>
                    <div class="wave-bar" style="--delay: 0.2s"></div>
                    <div class="wave-bar" style="--delay: 0.3s"></div>
                    <div class="wave-bar" style="--delay: 0.4s"></div>
                    <div class="wave-bar" style="--delay: 0.5s"></div>
                    <div class="wave-bar" style="--delay: 0.6s"></div>
                    <div class="wave-bar" style="--delay: 0.7s"></div>
                    <div class="wave-bar" style="--delay: 0.8s"></div>
                    <div class="wave-bar" style="--delay: 0.9s"></div>
                    <div class="wave-bar" style="--delay: 1.0s"></div>
                    <div class="wave-bar" style="--delay: 1.1s"></div>
                    <div class="wave-bar" style="--delay: 1.2s"></div>
                    <div class="wave-bar" style="--delay: 1.3s"></div>
                    <div class="wave-bar" style="--delay: 1.4s"></div>
                    <div class="wave-bar" style="--delay: 1.5s"></div>
                    <div class="wave-bar" style="--delay: 1.6s"></div>
                    <div class="wave-bar" style="--delay: 1.7s"></div>
                    <div class="wave-bar" style="--delay: 1.8s"></div>
                    <div class="wave-bar" style="--delay: 1.9s"></div>
                </div>
            </div>

            <!-- Status Message -->
            <div class="status-message" id="statusMessage">
                <span class="status-icon" id="statusIcon">ðŸŽ¤</span>
                <span class="status-text" id="statusText">Ready to listen</span>
            </div>

            <!-- Microphone Button -->
            <button class="voice-record-btn-large" id="voiceRecordBtn">
                <div class="mic-icon-large">ðŸŽ¤</div>
                <span class="btn-label">Hold to Speak</span>
            </button>

            <!-- Instructions -->
            <p class="instructions">
                Hold the microphone button and speak your question.<br>
                Release when finished to get a response.
            </p>
        </div>
    </div>

    <!-- Audio Player (hidden, for playing responses) -->
    <audio id="audioPlayer" style="display: none;"></audio>

    <script>
        // Check if scripts load
        console.log('Voice page loaded');
    </script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/voice.js"></script>
</body>
</html>

